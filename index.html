<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Precision Tool to Customize Lesson Sequence</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="wrap">
  <h1>Precision Tool to Customize Lesson Sequence</h1>

  <!-- Planning Information -->
  <div class="card">
    <div class="section-title">Affiliate Scheduling Information</div>
    <div class="grid">
      <label for="pid">Participant ID:</label>
      <input id="pid" type="text" placeholder="(optional)">

      <label for="firstLesson">Date of first lesson:</label>
      <input id="firstLesson" type="date" required>

      <label for="scheduleDuration">Duration of schedule:</label>
      <select id="scheduleDuration">
        <option value="up_to_3rd_birthday" selected>Up to youngest child's 3rd birthday</option>
        <option value="up_to_due_date">Up to due date</option>
        <option value="6_months">6 months from first visit</option>
        <option value="12_months">12 months from first visit</option>
      </select>

      <label for="pacing">Pacing:</label>
      <select id="pacing">
        <option value="standard" selected>Standard</option>
        <option value="defined">Defined</option>
      </select>

      <label for="definedPref">If defined pacing, preference:</label>
      <select id="definedPref" disabled>
        <option value="">— select —</option>
        <option value="weekly">Weekly</option>
        <option value="biweekly">Every 2 weeks</option>
        <option value="monthly">Monthly</option>
        <option value="bimonthly">Every 2 months</option>
      </select>

      <label for="completedLessons">Lessons to exclude from schedule:</label>
      <div class="input-stack">
        <select id="completedLessons" multiple size="8"></select>
        <div class="muted">Hold Ctrl (Windows) or Command (macOS) to select multiple lessons.</div>
        <div class="muted">Tip: Selecting one or more of these lessons will remove them from any schedule of visits.</div>
      </div>
    </div>
  </div>

  <!-- Child Information -->
  <div class="card">
    <div class="section-title">Child Information</div>
    <div class="grid">
      <label for="birthDate">Birth or due date of youngest child:</label>
      <input id="birthDate" type="date">
    </div>
  </div>

  <!-- Participant Information -->
  <div class="card">
    <div class="section-title">Participant (Primary Adult) Information</div>
    <div class="grid">
      <label for="ftp">Is the participant a first-time parent?</label>
      <select id="ftp">
        <option value="no">No</option>
        <option value="yes">Yes</option>
      </select>

      <label for="pregnant">Is the participant pregnant?</label>
      <select id="pregnant">
        <option value="no">No</option>
        <option value="yes">Yes</option>
      </select>
    </div>
  </div>

  <!-- Topics -->
  <div class="card">
    <div class="section-title">Topics of Interest to Family (Optional)</div>
    <div class="checkboxes">
      <label><input type="checkbox" id="topic_cfw"> Caregiver &amp; Family Wellbeing</label>
      <label><input type="checkbox" id="topic_fp"> Family Planning</label>
      <label><input type="checkbox" id="topic_nutrition"> Nutrition</label>
      <label><input type="checkbox" id="topic_sti"> Sexually Transmitted Infections</label>
      <label><input type="checkbox" id="topic_substance"> Substance Use</label>
    </div>

  </div>

  <div class="card">
    <div class="section-title">Schedule Actions</div>
    <p class="muted"><strong>Scheduling Note:</strong> Scheduling Notes: Visits are always scheduled to comply with the pacing selected in the form. However, visits may not have assigned lessons for one of three reasons: (1) the visit is scheduled during Thanksgiving week, (2) the visit is scheduled during the last two weeks of December, or (3) there are more visits than lessons; these visits are labeled "excess capacity" in the schedule. The default is to always include one lesson per visit; lessons may be doubled-up to ensure that all eligible lessons for a participant are scheduled. It is the responsibility of the home visitor to review the drafted schedule and ensure it meets participant needs.</p>
    <div class="btns">
      <button class="primary" id="generateBtn">Generate Schedule</button>
      <button id="exportBtn" disabled>Export CSV</button>
      <button id="resetBtn" type="button">Reset Form</button>
    </div>
    <div id="status" class="muted status-message"></div>
  </div>

  <!-- Results -->
  <div class="card" id="resultsCard" style="display:none;">
    <div class="section-title">Generated Schedule</div>
    <div id="summary" class="muted" style="margin-bottom:8px;"></div>
    <div style="max-height:60vh; overflow:auto; border:1px solid var(--line); border-radius:10px;">
      <table id="scheduleTable">
        <thead>
          <tr>
            <th>Visit #</th>
            <th>Visit Date</th>
            <th>Child Age (months)</th>
            <th>Variance from Standard Sequence</th>
            <th>Lesson Code</th>
            <th>Lesson Subject</th>
            <th>Minutes</th>
            <th>Total per Visit</th>
          </tr>
        </thead>
        <tbody id="scheduleBody"></tbody>
      </table>
    </div>
  </div>

</div>

<script type="module" src="js/app.js"></script>
</body>
</html>
